extends layout
include layout

block content
  .w3-row-padding.w3-padding-32
    input.w3-input(type='text', placeholder='Search', id='searchString', name='searchString')
    .w3-padding-16
      table.w3-table.w3-card.w3-centered
        tr
          th Resort ID
          th Guesty Listing Name
          th Unit Type
          th Status
          th Months
          th Started At
          th Finished At
          
        tbody(id="table-body")

    div.w3-center
      div.w3-bar(id="pagination")

      script(src='/javascripts/showRecords.js')
      script.
        var limit = 10, offset = 0, search='';
        var records = !{JSON.stringify(records)};
        let endpoint = `/sse/events`;
        let eventSource = new EventSource(`/sse/events?limit=${limit}&offset=${offset}&search=${search}`);
        showRecords(eventSource, "events");
        updatePagination(eventSource, limit, offset, "events", 1, records, endpoint, search)